---
dependency:
  name: galaxy
driver:
  name: podman
platforms:
#  - name: rhel8
#    image: registry.access.redhat.com/ubi8/ubi-init
#    pre_build_image: true
#    command: /sbin/init
#    #privileged: yes
#    tmpfs:
#      - /run
#      - /tmp
#      - /run/lock
#    volumes:
#      - /sys/fs/cgroup:/sys/fs/cgroup:ro
#    #override_command: false

#  - name: debian10
#    image: alehaa/debian-systemd:stretch
#    pre_build_image: true
#    privileged: true
#    command: /lib/systemd/systemd
#    #volumes:
#    #  - /sys/fs/cgroup:/sys/fs/cgroup:ro
#
  # Ubuntu20 working with podman driver
  - name: ubuntu20
    image: docker.io/jrei/systemd-ubuntu
    pre_build_image: true
    #privileged: true
    #override_command: false
    command: /usr/sbin/init # Needed to work in podman
    #volumes:
    #  - /sys/fs/cgroup:/sys/fs/cgroup:ro

#  - name: debian10
#    image: mpaivabarbosa/molecule-systemd-debian:10
#    #image: mesaguy/ansible-molecule-debian
#    volumes:
#      - /sys/fs/cgroup:/sys/fs/cgroup:ro
#    privileged: true
#    pre_build_image: true
#    #override_command: false
#    #command: /lib/systemd/systemd --user

#  - name: ubuntu18
#    image: solita/ubuntu-systemd:18.04
#    privileged: true
#    override_command: false
#    pre_build_image: true

provisioner:
  name: ansible
  #config_options:
  #  defaults:
  #    interpreter_python: auto_silent
  #    #callback_whitelist: profile_tasks, timer, yaml
  #  ssh_connection:
  #    pipelining: false
verifier:
  name: ansible
lint: |
  set -e
  yamllint .
  ansible-lint .
